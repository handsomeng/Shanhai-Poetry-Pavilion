# 🚀 山海诗馆 - 上线检查清单

## 📊 当前完成度：60%

---

## ⚠️ 必须完成（才能真正可用）

### 1. 核心功能集成（约 2-3 小时）

#### ✅ 已完成
- [x] 后端系统搭建（Supabase + PostgreSQL）
- [x] 用户认证（Apple + 邮箱）
- [x] 广场浏览（ExploreView）
- [x] 个人中心（ProfileView）
- [x] 诗歌数据 API
- [x] 互动功能 API

#### ❌ 待完成
- [ ] **写诗页面添加"发布到广场"按钮**（30 分钟）
  - DirectWritingView 添加发布功能
  - MimicWritingView 添加发布功能
  - ThemeWritingView 添加发布功能
  - 调用 `PoemService.publishPoem()` 和 `saveDraft()`

- [ ] **诗歌详情页添加点赞功能**（20 分钟）
  - PoemDetailView 添加点赞交互
  - 调用 `InteractionService.toggleLike()`
  - 实时更新点赞数

- [ ] **诗歌详情页添加收藏功能**（20 分钟）
  - PoemDetailView 添加收藏按钮
  - 调用 `InteractionService.toggleFavorite()`
  - 我的收藏列表显示后端数据

- [ ] **设置页面添加登出功能**（10 分钟）
  - SettingsView 添加"登出"按钮
  - 调用 `AuthService.signOut()`

**预计时间：1.5 小时**

---

### 2. Supabase 后端配置（约 30 分钟）

#### 数据库配置
- [x] 执行 SQL 迁移（`supabase_schema.sql`）
- [x] 验证表结构正确
- [ ] 插入测试数据（可选，用于演示）

#### 认证配置

**Apple Sign In（如果要用）：**
- [ ] 在 Supabase Dashboard 启用 Apple Provider
- [ ] 配置 Service ID：`com.shanhai.poetry`
- [ ] 在真机上登录 Apple ID 测试

**邮箱登录（推荐先用这个）：**
- [x] Email Provider 已启用
- [ ] 测试注册和登录流程

**建议：先用邮箱登录上线，Apple 登录等 App Store 审核时再启用**

**预计时间：30 分钟**

---

### 3. App Store 上线准备（约 2-3 天）

#### 基础资料
- [x] App Icon（已完成）
- [ ] 启动屏（Launch Screen）
- [ ] 隐私政策页面（URL）
- [ ] 用户协议页面（URL）

#### App Store 资料
- [ ] App 名称：山海诗馆
- [ ] 副标题：现代诗创作与分享社区
- [ ] 描述文案（详细介绍）
- [ ] 关键词（用于搜索优化）
- [ ] 支持 URL（你的网站或联系方式）
- [ ] 营销 URL（可选）
- [ ] 版权信息

#### 截图（iPhone 必需）
- [ ] 6.7" iPhone（Pro Max）：6 张
- [ ] 6.5" iPhone：可复用 6.7"
- [ ] 5.5" iPhone：可复用 6.7"

#### 分类和定价
- [ ] 主分类：娱乐 / 教育
- [ ] 次分类：生活方式
- [ ] 定价：免费
- [ ] 内购项目：会员订阅（如果需要）

**预计时间：2-3 天（主要是准备截图和文案）**

---

### 4. 测试和调试（约 1-2 天）

#### 功能测试
- [ ] 注册 → 登录 → 登出流程
- [ ] 写诗 → 发布 → 查看流程
- [ ] 点赞 → 收藏 → 评论流程
- [ ] 广场浏览 → 筛选功能
- [ ] 个人中心 → 诗歌管理

#### 兼容性测试
- [ ] iPhone SE（小屏）
- [ ] iPhone 14 Pro Max（大屏）
- [ ] iOS 15.0+（最低支持版本）
- [ ] iPad（可选）

#### 性能测试
- [ ] 启动速度 < 2 秒
- [ ] 网络请求响应 < 1 秒
- [ ] 无内存泄漏
- [ ] 无崩溃

**预计时间：1-2 天**

---

### 5. TestFlight 内测（约 3-7 天）

- [ ] 创建 App Store Connect 应用
- [ ] 上传第一个 Build
- [ ] 邀请内测用户（5-10 人）
- [ ] 收集反馈并修复 Bug
- [ ] 上传正式版本

**预计时间：3-7 天**

---

## ✅ 可选优化（可以上线后再做）

### 用户体验优化
- [ ] 实时同步（点赞数自动更新）
- [ ] 评论功能（完整的评论区）
- [ ] 搜索功能（按诗歌、作者搜索）
- [ ] 用户资料编辑（头像、简介）
- [ ] 消息通知（点赞、评论提醒）

### 社交功能
- [ ] 关注用户
- [ ] 私信功能
- [ ] 话题标签
- [ ] 诗歌合集

### 创作辅助
- [ ] AI 续写诗歌
- [ ] AI 点评优化
- [ ] 诗歌排版工具
- [ ] 分享到社交媒体

### 商业化
- [ ] 会员订阅（IAP）
- [ ] 付费内容解锁
- [ ] 打赏功能

---

## 🎯 建议上线策略

### 阶段一：MVP（最小可用产品）- 约 1 周

**目标：** 基础功能可用，能写诗、发布、浏览、互动

**必做：**
1. ✅ 写诗页面发布功能
2. ✅ 点赞和收藏功能
3. ✅ 登出功能
4. ✅ 邮箱登录（暂不用 Apple 登录）
5. ✅ 基础测试

**上线：**
- 仅邮箱注册/登录
- 核心功能完整
- 提交 TestFlight 内测

---

### 阶段二：App Store 审核 - 约 1-2 周

**准备：**
1. 隐私政策和用户协议
2. App Store 截图和描述
3. 配置 Apple Sign In（审核要求）
4. 完整测试流程

**提交审核：**
- 预计审核时间：1-7 天
- 可能被拒原因：
  - 隐私政策缺失
  - Apple 登录未配置
  - 功能描述不清
  - 有 Bug 或崩溃

---

### 阶段三：正式上线 - 上架后

**持续优化：**
1. 收集用户反馈
2. 修复 Bug
3. 添加新功能
4. 优化性能

---

## 📋 当前最紧急的任务（按优先级）

### 今天/明天（必做）
1. **写诗页面添加发布功能**（30 分钟）
2. **点赞和收藏功能集成**（40 分钟）
3. **设置页面添加登出**（10 分钟）
4. **测试完整流程**（1 小时）

**总计：2-3 小时，今天就能完成！**

---

### 本周（推荐）
1. Supabase 配置验证（30 分钟）
2. 准备隐私政策（1 小时）
3. 准备 App Store 截图（2 小时）
4. TestFlight 上传和内测（1 天）

**总计：3-4 天**

---

### 下周（可选）
1. 收集内测反馈（3-5 天）
2. 修复 Bug 和优化（2-3 天）
3. 提交 App Store 审核

---

## 💡 关键决策点

### 决策 1：Apple 登录 vs 邮箱登录

**方案 A（推荐）：先用邮箱，后加 Apple**
- ✅ 快速上线
- ✅ 测试方便
- ✅ 后续可加
- ❌ App Store 审核可能要求 Apple 登录

**方案 B：直接配置 Apple 登录**
- ✅ 符合审核要求
- ✅ 用户体验好
- ❌ 需要配置 Supabase Provider
- ❌ 测试需要真机 + Apple ID

**建议：** 方案 A，先内测邮箱版本，提审前加 Apple 登录

---

### 决策 2：功能范围

**方案 A（推荐）：MVP 快速上线**
- ✅ 核心功能：写诗 + 发布 + 浏览 + 互动
- ✅ 快速验证市场
- ❌ 功能简单

**方案 B：功能完善再上线**
- ✅ 功能丰富
- ✅ 用户体验好
- ❌ 开发时间长（1-2 个月）
- ❌ 可能过度设计

**建议：** 方案 A，先上 MVP，根据用户反馈迭代

---

### 决策 3：会员订阅

**方案 A：先免费，后加会员**
- ✅ 快速获取用户
- ✅ 验证需求
- ❌ 短期无收入

**方案 B：上线即收费**
- ✅ 有收入
- ❌ 用户增长慢
- ❌ 需要实现 IAP

**建议：** 方案 A，先积累用户，后续加会员功能

---

## 🚦 时间线估算

### 快速版（1-2 周上线）
```
第 1 天：完成核心功能集成（2-3 小时）
第 2 天：完整测试和修复（4 小时）
第 3-4 天：准备 App Store 资料
第 5 天：上传 TestFlight
第 6-10 天：内测和修复
第 11-14 天：提交审核
```

### 稳妥版（3-4 周上线）
```
第 1 周：完成所有核心功能 + 测试
第 2 周：准备上线资料 + TestFlight 内测
第 3 周：收集反馈 + 优化
第 4 周：提交审核 + 等待结果
```

---

## ✅ 总结

### 距离可用（内测）：**1 天**
- 只需完成 4 个核心功能集成
- 约 2-3 小时开发时间

### 距离上线（App Store）：**1-2 周**
- 需要准备资料和审核
- 可以边内测边准备

### 建议：
1. **今天**：完成核心功能集成（2-3 小时）
2. **明天**：完整测试流程
3. **本周**：准备上线资料，上传 TestFlight
4. **下周**：提交 App Store 审核

**你想先做哪个？我现在就可以帮你实现！** 🚀

