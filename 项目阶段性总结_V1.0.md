# 山海诗馆 - 项目阶段性总结（V1.0）

<div align="center">

**一款极简优雅的现代诗创作与分享 iOS 应用**

📅 项目启动：2025年10月  
🎯 当前版本：V1.0  
📱 开发平台：iOS 18.0+  
💻 开发框架：SwiftUI + Swift 5.0  

---

[![Platform](https://img.shields.io/badge/platform-iOS-lightgrey.svg)](https://www.apple.com/ios/)
[![Swift](https://img.shields.io/badge/Swift-5.0-orange.svg)](https://swift.org)
[![SwiftUI](https://img.shields.io/badge/SwiftUI-100%25-blue.svg)](https://developer.apple.com/xcode/swiftui/)
[![Status](https://img.shields.io/badge/status-App%20Store%20Review-green.svg)]()

</div>

---

## 📖 项目概况

### 产品定位

**山海诗馆**是一款专注于**个人诗歌创作**的 iOS 工具应用，致力于降低现代诗创作门槛，让每个人都能轻松写出有质感的诗歌。

### 核心理念

> **"让诗歌创作回归纯粹"**

- 🎨 **极简美学**：Dribbble 级别的设计，大量留白，让用户专注于诗歌本身
- 🤖 **AI 赋能**：DeepSeek AI 提供智能点评和创作辅助，而非替代创作
- 📚 **系统学习**：20+ 篇原创教程，从零开始的完整学习路径
- ✍️ **多元创作**：三种创作模式，适配不同场景和需求
- 🔒 **隐私优先**：本地存储为主，用户完全掌控自己的作品

### 目标用户

1. **诗歌初学者** - 想要学习现代诗创作，需要引导和反馈
2. **业余创作者** - 有创作习惯，需要灵感和改进建议
3. **诗歌爱好者** - 享受创作过程，希望记录和分享作品
4. **文学青年** - 追求精神表达，重视审美体验

---

## ✅ V1.0 已实现功能

### 一、诗歌创作系统（核心功能）

#### 1. 三种创作模式

<table>
<tr>
<th width="25%">模式</th>
<th width="35%">功能描述</th>
<th width="20%">适用场景</th>
<th width="20%">AI 支持</th>
</tr>

<tr>
<td><strong>📝 直接写诗</strong></td>
<td>
• 自由创作空间<br>
• 实时字数统计<br>
• 自动保存草稿<br>
• 标题限制30字
</td>
<td>有明确创作想法<br>追求自由表达</td>
<td>AI 点评<br>AI 续写灵感</td>
</tr>

<tr>
<td><strong>🎭 临摹写诗</strong></td>
<td>
• 内置经典诗歌范本<br>
• 分屏对比显示<br>
• 参考风格学习<br>
• 逐步培养语感
</td>
<td>初学者练习<br>学习特定风格</td>
<td>AI 示例诗<br>AI 点评</td>
</tr>

<tr>
<td><strong>🎨 主题写诗</strong></td>
<td>
• AI 生成多样化主题<br>
• 创作引导和建议<br>
• 意象提示<br>
• 降低创作门槛
</td>
<td>缺乏灵感<br>日常练笔</td>
<td>AI 主题生成<br>AI 创作引导<br>AI 点评</td>
</tr>
</table>

#### 2. AI 智能辅助功能

| 功能 | 说明 | 免费额度 | 会员权益 |
|------|------|---------|----------|
| **AI 点评** | 从意象、情感、语言、结构四维度深度分析 | 2次/周 | 无限次 |
| **AI 续写灵感** | 创作卡壳时提供思路和方向 | 2次/周 | 无限次 |
| **AI 主题生成** | 推荐创作主题和引导 | 2次/周 | 无限次 |
| **AI 示例诗** | 生成高质量范本供学习 | 2次/周 | 无限次 |

**技术实现**：
- ✅ DeepSeek API 集成（deepseek-chat 模型）
- ✅ 优化 Prompt 工程，避免过度讨好，提供建设性建议
- ✅ 错误处理和重试机制
- ✅ 使用额度管理和提示

#### 3. 编辑器优化

- ✅ **纯 UIKit 实现** - 解决 SwiftUI TextEditor 在 iPad 上的光标问题
- ✅ **键盘智能避让** - 光标始终可见，不会被键盘遮挡
- ✅ **取消确认机制** - 提供"放弃/保存草稿/继续编辑"选项
- ✅ **自动保存** - 防止内容丢失

---

### 二、诗集管理系统

#### 1. 诗集 Tab（主要作品库）

- ✅ **诗集展示** - 以卡片形式展示所有已保存作品
- ✅ **草稿管理** - 独立 Tab，保存未完成的创作
- ✅ **排序方式** - 按创建时间倒序
- ✅ **空状态引导** - 优雅的空状态视图

#### 2. 诗歌详情页

- ✅ **沉浸式阅读** - 大字号、宽间距，优雅排版
- ✅ **操作菜单** - 编辑、复制、分享、删除
- ✅ **编辑功能** - 光标自动定位到末尾，优化编辑体验
- ✅ **内容与元数据间距优化** - 视觉层次清晰

---

### 三、分享系统

#### 1. 图片模板生成

**已实现 5 种精美模板**：

| 模板 | 风格特点 | 适用场景 |
|------|---------|----------|
| **极简风格** | 纯白背景，细线分割，经典黑白 | 正式发表、文艺风格 |
| **山海国风** | 浅色调，山水元素，诗意氛围 | 传统诗词、意境展示 |
| **暖系日系** | 米色背景，温暖色调，小清新 | 日常分享、温馨风格 |
| **深夜暗黑** | 深色背景，高对比度，神秘感 | 夜间创作、个性表达 |
| **赛博朋克** | 渐变色彩，科技感，前卫风格 | 现代诗歌、前卫表达 |

**技术特性**：
- ✅ 统一格式：诗句 + 分割线 + 山海诗馆·作者·第X首诗·日期
- ✅ 3x 分辨率（确保清晰度）
- ✅ 实时预览和切换
- ✅ 保存到相册（带 Toast 提示）
- ✅ 系统原生分享（微信、朋友圈、社交媒体）

#### 2. 分享流程

```
诗歌详情 → 点击"..." → 分享 → 模板选择器 → 预览/更换模板 → 保存图片/系统分享
```

---

### 四、学习系统

#### 1. 学诗 Tab

- ✅ **6 大主题分类**
  - 现代诗入门
  - 诗歌语言
  - 节奏与结构
  - 情感表达
  - 经典赏析
  - 实践指南

- ✅ **20+ 篇原创教程** - 从基础概念到高级技巧
- ✅ **结构化学习路径** - 大主题 → 子主题 → 详细文章
- ✅ **学习 → 创作闭环** - 可直接从学习页跳转到创作页

---

### 五、会员订阅系统

#### 1. 订阅套餐

| 套餐 | 价格 | 折算月价 | 推荐理由 |
|------|------|---------|----------|
| **月卡** | ¥9.9/月 | ¥9.9/月 | 短期体验 |
| **季卡** | ¥19.9/季 | ¥6.6/月 | **推荐** - 省33% |
| **年卡** | ¥69.9/年 | ¥5.8/月 | 最划算 - 省41% |

**所有套餐均支持 7 天免费试用**

#### 2. 会员权益

<table>
<tr>
<th>功能</th>
<th>免费用户</th>
<th>付费会员</th>
</tr>
<tr>
<td>AI 点评</td>
<td>2次/周</td>
<td><strong>无限次</strong></td>
</tr>
<tr>
<td>AI 续写思路</td>
<td>2次/周</td>
<td><strong>无限次</strong></td>
</tr>
<tr>
<td>主题写诗</td>
<td>2次/周</td>
<td><strong>无限次</strong></td>
</tr>
<tr>
<td>临摹写诗</td>
<td>2次/周</td>
<td><strong>无限次</strong></td>
</tr>
<tr>
<td>图片模板</td>
<td>基础模板</td>
<td><strong>多种精美模板</strong></td>
</tr>
<tr>
<td>会员标识</td>
<td>—</td>
<td><strong>👑</strong></td>
</tr>
</table>

#### 3. 技术实现

- ✅ **StoreKit 2** 集成
- ✅ **沙盒测试** 完整支持
- ✅ **恢复购买** 功能
- ✅ **iPad 完全兼容** - 所有按钮正常响应

---

### 六、用户成长系统

#### 诗人等级系统

| 等级 | 称号 | 解锁条件 | 寓意 |
|------|------|---------|------|
| 🌱 | 初见诗人 | 1首诗 | 诗歌之路的起点 |
| 🌿 | 寻山诗人 | 5首诗 | 开始探索诗歌山峰 |
| 🍃 | 听雨诗人 | 10首诗 | 善于捕捉细腻情感 |
| 🌾 | 观海诗人 | 20首诗 | 视野开阔，包容万象 |
| 🌸 | 踏春诗人 | 35首诗 | 作品如春天般生机 |
| 🍂 | 拾秋诗人 | 50首诗 | 沉淀与收获的阶段 |
| ❄️ | 雪夜诗人 | 75首诗 | 宁静深邃的境界 |
| 🌙 | 山海诗人 | 100首诗 | 融会贯通，自成一派 |

**特色**：
- ✅ 隐藏彩蛋：连续点击笔名5次可查看 AI 诗人画像分析
- ✅ 进度可视化：清晰展示当前等级和下一等级进度
- ✅ 激励机制：鼓励持续创作

---

### 七、设计系统

#### 1. Lovart 极简美学

**颜色系统**：
```
背景：纯白 (#FFFFFF)
主文字：深邃黑 (#0A0A0A)
次要文字：中性灰 (#4A4A4A)
辅助文字：浅灰 (#ABABAB)
分割线：极浅灰 (#E5E5E5)
强调色：纯黑 (#1A1A1A)
```

**字体系统**：
```
页面标题：36-48pt, ultraLight, Serif
卡片标题：24-30pt, ultraLight, Serif
诗歌内容：19-20pt, light, Serif
正文：15-17pt, light, Default
辅助：10-12pt, ultraLight, Default
```

**间距系统**（大量留白）：
```
huge: 160pt
xxxl: 128pt
xxl: 96pt
xl: 64pt
lg: 40pt
md: 24pt
sm: 16pt
xs: 8pt
```

**交互设计**：
- ✅ 点击缩放反馈（0.95-0.97倍）
- ✅ 0.15-0.2s easeInOut 动画
- ✅ Toast 轻量级提示（替代 Alert）
- ✅ 点赞 Spring 弹跳动画

#### 2. 设计原则

1. **极简纯粹** - 去除一切不必要的元素
2. **大量留白** - 让内容呼吸，让视觉放松
3. **轻盈字体** - ultraLight 和 light，精致优雅
4. **黑白为主** - 经典永恒，突出诗歌内容
5. **细节精致** - 微圆角（4-8pt），细边框（1pt）

---

### 八、技术架构

#### 1. 技术栈

| 分类 | 技术选型 | 说明 |
|------|---------|------|
| **开发语言** | Swift 5.0 | 类型安全，现代化语法 |
| **UI 框架** | SwiftUI | 100% SwiftUI，声明式 UI |
| **架构模式** | MVVM | Model-View-ViewModel |
| **异步编程** | async/await + Combine | 现代异步处理 |
| **本地存储** | UserDefaults | 轻量级数据持久化 |
| **网络请求** | URLSession | 原生网络框架 |
| **AI 服务** | DeepSeek API | deepseek-chat 模型 |
| **订阅系统** | StoreKit 2 | 原生 IAP |
| **编辑器** | UIKit (UITextView) | 解决 SwiftUI 兼容性问题 |

#### 2. 项目结构

```
BetweenLines/
├── Models/                      # 数据模型层
│   ├── Poem.swift              # 诗歌数据模型
│   ├── PoemManager.swift       # 诗歌管理器（CRUD）
│   ├── LearningContent.swift   # 学习内容
│   ├── PoetTitle.swift         # 诗人等级
│   ├── SubscriptionManager.swift   # 订阅管理
│   └── SubscriptionProduct.swift   # 订阅产品
│
├── Views/                       # 视图层（SwiftUI）
│   ├── Collection/             # 诗集模块
│   │   ├── PoetryCollectionView.swift  # 诗集主页
│   │   ├── CreateModeSelectorView.swift # 创作模式选择
│   │   ├── PoetProfileView.swift       # 诗人画像
│   │   └── SearchView.swift            # 搜索
│   │
│   ├── Writing/                # 写诗模块
│   │   ├── DirectWritingView.swift     # 直接写诗
│   │   ├── MimicWritingView.swift      # 临摹写诗
│   │   ├── ThemeWritingView.swift      # 主题写诗
│   │   └── PoemEditorView.swift        # 编辑器（UIKit桥接）
│   │
│   ├── Learning/               # 学习模块
│   │   └── LearningView.swift
│   │
│   ├── Profile/                # 个人模块
│   │   ├── MyPoemDetailView.swift      # 诗歌详情
│   │   └── ProfileView.swift           # 个人主页（已弃用）
│   │
│   ├── Settings/               # 设置模块
│   │   ├── SettingsView.swift          # 设置主页
│   │   ├── AboutView.swift             # 关于页面
│   │   └── PrivacyPolicyView.swift     # 隐私政策
│   │
│   ├── Subscription/           # 订阅模块
│   │   ├── SubscriptionView.swift      # 订阅页面
│   │   └── MembershipDetailView.swift  # 会员详情
│   │
│   ├── Share/                  # 分享模块
│   │   ├── PoemShareView.swift         # 分享页面
│   │   ├── TemplateSelector.swift      # 模板选择器
│   │   └── Templates/                  # 5种图片模板
│   │
│   └── Shared/                 # 共用组件
│       ├── MainTabView.swift           # 主Tab导航
│       ├── AICommentSheet.swift        # AI点评弹窗
│       └── ToastView.swift             # Toast通知
│
├── Services/                    # 服务层
│   ├── AIService.swift         # DeepSeek API
│   ├── PoemService.swift       # 诗歌服务（已弃用）
│   └── UserIdentityService.swift   # 用户标识
│
├── Utilities/                   # 工具层
│   ├── Constants.swift         # 设计系统常量
│   ├── ButtonStyles.swift      # 按钮样式
│   ├── PoemImageGenerator.swift    # 图片生成
│   └── ErrorHandler.swift      # 错误处理
│
└── Assets.xcassets/            # 资源文件
    ├── AppIcon.appiconset/     # 应用图标
    └── AppLogo.imageset/       # 应用Logo
```

#### 3. 技术亮点

1. **100% SwiftUI** - 无 UIKit 依赖（除编辑器外）
2. **响应式架构** - @State + @Published 自动更新
3. **组件化设计** - 高复用性，易维护
4. **类型安全** - 充分利用 Swift 类型系统
5. **现代异步** - async/await 优雅处理异步操作
6. **自定义组件** - ButtonStyle、Toast 等统一体验
7. **iPad 完全适配** - NavigationStack + sheet 完美兼容

---

## 🎯 产品完成度评估

### 核心功能完成度：95%

| 模块 | 完成度 | 说明 |
|------|--------|------|
| ✍️ 写诗模块 | 100% | 三种模式完整，AI辅助完善 |
| 📚 学诗模块 | 100% | 内容完整，体验流畅 |
| 🗂️ 诗集管理 | 100% | 展示、编辑、分享功能完整 |
| 🎨 分享系统 | 100% | 5种模板，保存和系统分享 |
| 💳 订阅系统 | 100% | 三种套餐，权益管理完整 |
| ⚙️ 设置页面 | 95% | 核心功能完整，细节优化中 |
| 🏆 成长系统 | 100% | 等级系统、诗人画像完整 |

### 技术完成度：98%

- ✅ 架构设计完整
- ✅ 核心代码无 Linter 错误
- ✅ iPad 兼容性修复完成
- ✅ 订阅系统测试通过
- ✅ AI 功能稳定可用
- ⚠️ 待完成：App Store 审核通过

---

## 📊 项目数据统计

### 代码统计

- **总文件数**: 60+ 个 Swift 文件
- **代码行数**: 约 8,000+ 行
- **UI 组件**: 40+ 个自定义 View
- **Git 提交**: 60+ 次
- **开发周期**: 约 2-3 周（含优化和修复）

### 功能统计

- **创作模式**: 3 种
- **AI 功能**: 4 种（点评、续写、主题生成、示例诗）
- **图片模板**: 5 种
- **学习教程**: 20+ 篇
- **诗人等级**: 8 个
- **订阅套餐**: 3 个

---

## 🚀 当前项目状态

### ✅ 已完成

1. **核心功能开发** - 100% 完成
2. **UI/UX 设计** - 遵循 Lovart 设计系统
3. **iPad 兼容性** - 修复所有已知问题
4. **订阅系统** - 沙盒测试通过
5. **AI 功能** - DeepSeek API 集成完成
6. **分享功能** - 5 种模板，体验流畅
7. **代码优化** - 无 Linter 错误，规范清晰

### 🔄 进行中

1. **App Store 审核** - 准备重新提交
   - 已修复：iPad 按钮无响应问题（NavigationView → NavigationStack）
   - 已修复：fullScreenCover 兼容性问题
   - 已优化：订阅按钮样式

### 📋 待完成

1. **App Store 上线** - 等待审核通过
2. **用户反馈收集** - 上线后收集
3. **数据监控** - 埋点和分析
4. **内容更新** - 学习教程持续更新

---

## 💡 产品设计哲学

### 1. 极简主义

> "少即是多"

- **视觉极简** - 纯白背景，黑白配色，大量留白
- **功能极简** - 聚焦核心创作，不做社交分散注意力
- **交互极简** - 流程简化，操作直观

### 2. AI 辅助而非替代

> "AI 是教练，不是代笔"

- **AI 点评** - 分析和建议，帮助提升
- **AI 续写** - 提供思路，而非直接续写
- **AI 主题** - 激发灵感，而非生成诗歌

### 3. 尊重创作

> "每首诗都值得被认真对待"

- **本地存储** - 用户完全掌控作品
- **草稿保护** - 防止意外丢失
- **隐私保护** - 不强制登录，不强制分享

### 4. 持续学习

> "好诗人是练出来的"

- **系统教程** - 从基础到进阶
- **多种模式** - 适应不同阶段
- **成长激励** - 等级系统可视化进步

---

## 🎨 设计灵感来源

1. **Dribbble** - 极简主义设计作品
2. **Apple HIG** - 人机界面指南
3. **日本禅意设计** - 留白与简约
4. **瑞士平面设计** - 网格与秩序
5. **flomo** - 卡片式内容组织
6. **Notion** - 优雅的编辑体验

---

## 📈 后续功能规划空间

### V1.1 优化方向（短期）

<details>
<summary>点击展开查看详细规划</summary>

#### 用户体验优化

- [ ] **深色模式** - 支持系统深色模式
- [ ] **更多模板** - 增加到 10+ 种图片模板
- [ ] **诗歌搜索** - 按标题、内容搜索自己的诗
- [ ] **排序功能** - 支持按时间、字数、修改时间排序
- [ ] **批量操作** - 批量删除、导出

#### AI 功能增强

- [ ] **AI 改写建议** - 提供具体的改写方案
- [ ] **AI 风格分析** - 分析作品的整体风格
- [ ] **AI 创作历程** - 记录每首诗的迭代过程
- [ ] **智能推荐主题** - 基于历史创作推荐主题

#### 数据功能

- [ ] **创作统计** - 字数、频率、时间分布
- [ ] **成长报告** - 月度/年度创作总结
- [ ] **作品导出** - PDF、TXT、图片批量导出
- [ ] **数据备份** - 支持导出完整数据

</details>

### V2.0 重大更新（中期）

<details>
<summary>点击展开查看详细规划</summary>

#### 社交功能（可选）

> 根据 V1 用户反馈决定是否开发

- [ ] **诗歌广场** - 发布和浏览他人作品
- [ ] **点赞评论** - 社区互动
- [ ] **关注系统** - 关注感兴趣的诗人
- [ ] **内容审核** - AI + 人工审核机制

**前提条件**：
- 用户量达到一定规模
- 有运营团队支持
- 法律合规准备完成

#### 创作工具增强

- [ ] **协作创作** - 多人共同创作一首诗
- [ ] **诗歌挑战** - 每日/每周创作主题
- [ ] **版本历史** - 查看诗歌的修改历史
- [ ] **语音输入** - 支持语音创作
- [ ] **朗读功能** - TTS 朗读诗歌

#### 数据同步

- [ ] **iCloud 同步** - 多设备数据同步
- [ ] **账号系统** - 登录后云端备份
- [ ] **跨平台** - Web 版、iPad 优化版

</details>

### V3.0 长期愿景（远期）

<details>
<summary>点击展开查看详细规划</summary>

#### 平台扩展

- [ ] **iPad 专属版** - 针对大屏优化
- [ ] **macOS 版本** - 桌面创作体验
- [ ] **Apple Watch** - 碎片化创作
- [ ] **Web 版本** - 浏览器访问

#### 内容生态

- [ ] **诗歌课程** - 视频教程
- [ ] **名家讲座** - 邀请诗人分享
- [ ] **出版服务** - 实体诗集制作
- [ ] **诗歌朗诵** - 音频分享

#### 商业化探索

- [ ] **高级会员** - 更多专属功能
- [ ] **付费课程** - 系统化学习路径
- [ ] **定制服务** - 一对一诗歌指导
- [ ] **广告合作** - 文化品牌合作

</details>

---

## 🎯 项目里程碑

### 已完成里程碑 ✅

- **2025-10-01**: 项目启动，确定产品方向
- **2025-10-10**: 核心功能开发完成
- **2025-10-15**: UI/UX 设计定稿
- **2025-10-20**: AI 功能集成完成
- **2025-10-25**: 订阅系统开发完成
- **2025-10-28**: 首次提交 App Store（被拒）
- **2025-11-04**: iPad 兼容性修复完成

### 即将完成里程碑 🔄

- **2025-11-05**: 重新提交 App Store
- **2025-11-08**: App Store 审核通过（预期）
- **2025-11-10**: 正式上线（预期）

### 未来里程碑 📋

- **2025-12**: V1.1 更新，优化用户体验
- **2026-Q1**: 根据用户反馈规划 V2.0
- **2026-Q2**: 可能开始社交功能开发
- **2026-Q3**: 探索多平台可能性

---

## 📊 成功指标（KPI）

### 产品指标

1. **用户留存**
   - 次日留存 > 40%
   - 7日留存 > 25%
   - 30日留存 > 15%

2. **使用频率**
   - 周活跃用户 > 60%
   - 人均每周创作 > 2 首
   - AI 功能使用率 > 70%

3. **付费转化**
   - 试用转化率 > 20%
   - 付费用户占比 > 5%
   - 月度流水增长 > 10%

### 质量指标

1. **技术质量**
   - Crash 率 < 0.5%
   - 启动时间 < 2s
   - 内存占用 < 100MB

2. **用户满意度**
   - App Store 评分 > 4.5 分
   - 好评率 > 85%
   - 卸载率 < 10%

---

## 💎 项目亮点总结

### 1. 设计美学

- ✨ Dribbble 级别的极简设计
- ✨ 大量留白，专注内容
- ✨ 黑白配色，经典永恒
- ✨ 细腻的交互动画

### 2. AI 赋能

- 🤖 DeepSeek AI 深度集成
- 🤖 四维度智能点评
- 🤖 创作辅助而非替代
- 🤖 持续优化 Prompt 工程

### 3. 用户体验

- 📱 流畅的创作流程
- 📱 三种模式灵活切换
- 📱 草稿自动保存
- 📱 一键生成精美图片

### 4. 技术架构

- 💻 100% SwiftUI
- 💻 MVVM 架构清晰
- 💻 代码规范，易维护
- 💻 iPad 完全兼容

### 5. 成长激励

- 🏆 诗人等级系统
- 🏆 AI 画像分析
- 🏆 创作数据统计
- 🏆 持续学习路径

---

## 📝 开发团队

**产品设计**: HandsoMeng  
**iOS 开发**: HandsoMeng + AI Assistant  
**UI/UX 设计**: HandsoMeng  
**内容创作**: HandsoMeng  

---

## 📞 联系方式

- **邮箱**: martinwm2011@hotmail.com
- **网站**: www.handsomeng.com
- **GitHub**: [@handsomeng](https://github.com/handsomeng)

---

## 🙏 致谢

感谢以下技术和服务的支持：

- **Apple** - SwiftUI 框架和 StoreKit
- **DeepSeek** - AI 能力支持
- **Dribbble** - 设计灵感来源
- **所有现代诗爱好者** - 你们的热爱是最大的动力

---

<div align="center">

**用诗歌记录生活，用代码创造美好**

Made with ❤️ by HandsoMeng

---

📅 **文档更新时间**: 2025年11月4日  
📱 **当前版本**: V1.0  
🚀 **项目状态**: App Store 审核中

</div>

